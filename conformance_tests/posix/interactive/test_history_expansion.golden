Testing history expansion patterns:
Setting up history context...
test command
Testing !! expansion:
Previous command would be: !!
Testing !n expansion:
Command 1 would be: !1
Command 2 would be: !2
Testing !-n expansion:
Last command would be: !-1
Two commands back would be: !-2
Testing !string expansion:
Last echo would be: !echo
Last true would be: !true
Testing !?string? expansion:
Command containing 'test': !?test?
Command containing 'command': !?command?
Testing history expansion contexts:
In variable assignment:
Previous command: !!
In command substitution:
Would expand: !!
In conditional:
History expansion in conditional
Testing quotes with history expansion:
Single quotes prevent: !!
Double quotes allow: !!
Escaped: \!\!
Testing special characters in history:
Exclamation in string: hello!
Multiple exclamations: !!!
Exclamation with space: ! space
Testing history expansion error handling:
Non-existent command: !nonexistent
Invalid number: !999
Testing history modifiers:
Word selection: !!:1
All arguments: !!:*
Last argument: !!:$
Testing history with glob patterns:
Pattern with history: !echo*
Testing rapid fire commands:
first command
second command
Repeat last: !!
Testing history in loops:
Loop iteration 1: !!
Loop iteration 2: !!
Testing history with redirections:
Command with redirect: !! > /dev/null
Testing history event not found:
Empty pattern: !
History expansion test completed
